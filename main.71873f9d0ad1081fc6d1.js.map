{"version":3,"sources":["webpack:///./templates/template.hbs","webpack:///./js/timer.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","markup","field","selector","targetDate","this","refs","days","hours","mins","secs","init","setMarkup","setInterval","currentTime","Date","diffTime","calculator","time","countdown","targetSelector","timerEl","document","querySelector","targetDateEl","insertAdjacentHTML","dateToShow","toLocaleString","year","month","day","textContent","nextElementSibling","pad","Math","floor","value","String","padStart"],"mappings":"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","file":"main.71873f9d0ad1081fc6d1.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"field\\\">\\r\\n    <span class=\\\"value\\\" data-value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"field\") || (depth0 != null ? lookupProperty(depth0,\"field\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"field\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":36},\"end\":{\"line\":3,\"column\":45}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"field\") || (depth0 != null ? lookupProperty(depth0,\"field\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"field\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":47},\"end\":{\"line\":3,\"column\":56}}}) : helper)))\n    + \"</span>\\r\\n    <span class=\\\"label\\\">:</div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":5,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","import template from '../templates/template.hbs';\r\n\r\nconst inputObject = [\r\n  { field: 'days' },\r\n  { field: 'hours' },\r\n  { field: 'mins' },\r\n  { field: 'secs' },\r\n];\r\n\r\nconst markup = template(inputObject);\r\n\r\nclass CountdownTimer {\r\n  constructor({ selector, targetDate }) {\r\n    this.selector = selector;\r\n    this.targetDate = targetDate;\r\n\r\n    this.refs = {\r\n      days: '',\r\n      hours: '',\r\n      mins: '',\r\n      secs: '',\r\n    };\r\n  }\r\n\r\n  init() {\r\n    this.setMarkup();\r\n\r\n    setInterval(() => {\r\n      const currentTime = new Date();\r\n      const diffTime = this.targetDate - currentTime;\r\n\r\n      if (diffTime <= 0) {\r\n        return this.calculator(0);\r\n      }\r\n\r\n      const time = this.calculator(diffTime);\r\n\r\n      this.countdown(time);\r\n    }, 1000);\r\n  }\r\n\r\n  setMarkup() {\r\n    const targetSelector = this.selector;\r\n    const timerEl = document.querySelector(`${targetSelector}`);\r\n    const targetDateEl = document.querySelector('.main__description');\r\n\r\n    timerEl.insertAdjacentHTML('afterbegin', markup);\r\n\r\n    const options = {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n    };\r\n\r\n    const dateToShow = this.targetDate.toLocaleString('en-US', options);\r\n    targetDateEl.textContent = `Target date is ${dateToShow}`;\r\n\r\n    this.refs = {\r\n      days: document.querySelector('span[data-value=\"days\"]'),\r\n      hours: document.querySelector('span[data-value=\"hours\"]'),\r\n      mins: document.querySelector('span[data-value=\"mins\"]'),\r\n      secs: document.querySelector('span[data-value=\"secs\"]'),\r\n    };\r\n\r\n    this.refs.secs.nextElementSibling.textContent = '';\r\n  }\r\n\r\n  calculator(time) {\r\n    const days = this.pad(Math.floor(time / (1000 * 60 * 60 * 24)));\r\n    const hours = this.pad(\r\n      Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\r\n    );\r\n    const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\r\n    const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));\r\n\r\n    return { days, hours, mins, secs };\r\n  }\r\n\r\n  countdown({ days, hours, mins, secs }) {\r\n    this.refs.days.textContent = days;\r\n    this.refs.hours.textContent = hours;\r\n    this.refs.mins.textContent = mins;\r\n    this.refs.secs.textContent = secs;\r\n  }\r\n\r\n  pad(value) {\r\n    return String(value).padStart(2, '0');\r\n  }\r\n}\r\n\r\nconst timer = new CountdownTimer({\r\n  selector: '#timer-1',\r\n  targetDate: new Date('Jul 17, 2021'),\r\n});\r\n\r\ntimer.init();\r\n\r\n/*\r\nconst timer2 = new CountdownTimer({\r\n  selector: '#timer-2',\r\n  targetDate: new Date('Jan 1, 2022'),\r\n});\r\n\r\ntimer2.init();\r\n*/\r\n/* Mentor: Не оптимально обращаться каждую секунду к ДОМ - дереву.\r\nПередавайте в класс ссылку на объкт refs при инициализации класса \r\nили вынесите объект refs в конструктор\r\n*/\r\n"],"sourceRoot":""}